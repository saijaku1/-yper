<!doctype html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ζyperポイント計算機</title>
    <link rel="icon" href="../image/zetyper.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
  <div class="button" href="#top">
    <a href="#top" class="back-button">↑</a>
  </div>
    <div class="background">
<h1 class="hidden slide-in-left delay-1">ζyperポイント計算機</h1>
</div>
<header>
    <nav>
        <ul>
            <li><img src="../image/zetyper.png"  id="zetyper-icon"></li>
            <li><a href="https://zetyper.f5.si">ホーム</a></li>
            <li><a href="https://zetyper.f5.si/ranking">ζyperランキング</a></li>
            <li><a href="https://zetyper.f5.si/#join">チームへの参加方法</a></li>
            <li><a href="https://zetyper.f5.si/member">メンバー紹介</a></li>
        </ul>
    </nav>
</header>
<div>
    <p>ζyperポイントの計算機構です。</p>
<form id="scoreForm" autocomplete="off">
  <div class="box">
    <input type="number" id="ety" placeholder="e-typing" required max="1300">
    <input type="number" id="dtr" placeholder="打トレ" required max="1300">
    <input type="number" id="tyz" placeholder="タイピンガーZ" required max="1300">
    <input type="number" id="tys" placeholder="タイピング速度測定" required max="650">
    <input type="number" id="zet" placeholder="ζyper腕試し" required max="5000">
    <input type="number" id="zew" placeholder="ζyper単語腕試し" required max="3000">
    <button type="submit" id="send">計算</button>
    <button type="button" id="reset">値をリセット</button>
  </div>
</form>

<p id="result" style="color:white; text-align: center; font-size:30px;">計算結果がここに出ます・・・</p>
<p id="rankText" style="color:white; text-align: center; font-size:30px;">your rank:<span id="rank">?</span></p>


<div class="use">
<h2>使い方/How to use</h2>
<p>それぞれのハイスコアを入力して<b>計算ボタン</b>を押してください。</p>
<p>made by shidaken ζyper開発班</p>
</div>
</div>

<footer class="footer">
  <div class="footer-container">
    <!-- 左側：ロゴとタイトル -->
    <div class="footer-brand">
      <img src="../image/zetyper-footer.png" width="200px" height="200px">
      
    </div>

    <!-- 右側：フッターメニュー -->
    <div class="footer-links">
      <div class="footer-column">
        <h4>ソーシャル</h4>
        <ul>
          <li><a href="https://www.youtube.com/@ze-taipa" target="_blank">Youtube</a></li>
          <li><a href="https://x.com/yper343802" target="_blank">X(旧Twitter)</a></li>
          <li><a href="https://discord.gg/sAjsFKArNw" target="_blank">Discord</a></li>
          <li><a href="https://padlet.com/typer3915/yper-yn963c63aqw79j9p" target="_blank">Padlet</a></li>
             <li><a href="https://ankey.io/@ze-typer" target="_blank">Ankey</a></li>
          
        </ul>
      </div>

      <div class="footer-column">
        <h4>開発</h4>
        <ul>
          <li><a href="https://zetyper.f5.si/docs" target="_blank">ドキュメント</a></li>
          <li><a href="https://github.com/saijaku1/-yper/tree/main" target="_blank">リポジトリ</a></li>
          <li><a href="https://zetyper.f5.si/docs/updated" target="_blank">変更履歴</a></li>
        </ul>
      </div>

      <div class="footer-column">
        <h4>リソース</h4>
        <ul>
          <li><a href="https://zetyper.f5.si/docs/terms-of-service" target="_blank">利用規約</a></li>
          <li><a href="https://zetyper.f5.si/docs/guidelines" target="_blank">ガイドライン</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- コピーライト -->
  <div class="footer-bottom">
    <p>© 2025 - ζyper. 全著作権所有</p>
  </div>
</footer>
</main>
<script>
const btn = document.getElementById('send');
const result = document.getElementById('result');
const rankText = document.getElementById('rankText');

btn.addEventListener('click', () => {
  result.classList.remove('animate');
  rankText.classList.remove('animate');
  void result.offsetWidth;
  result.classList.add('animate');
});

result.addEventListener('animationend', () => {
  rankText.classList.remove('animate');
  void rankText.offsetWidth;
  rankText.classList.add('animate');
});

 const targets = document.querySelectorAll(".hidden");

const observer = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("show");
      } else {
        entry.target.classList.remove("show");
      }
    });
  },
  {
    threshold: 0.1,
  }
);

targets.forEach((target) => observer.observe(target));

document.addEventListener("DOMContentLoaded", () => {
  const menuToggle = document.createElement("div");
  menuToggle.classList.add("menu-toggle");
  menuToggle.innerHTML = "☰"; // ハンバーガーアイコン
  document.querySelector("header nav").prepend(menuToggle);

  const navMenu = document.querySelector("header nav ul");
  menuToggle.addEventListener("click", () => {
    navMenu.style.display = navMenu.style.display === "flex" ? "none" : "flex";
  });
});

const $ = document.getElementById.bind(document);
const form = $("scoreForm");
const inputs = ["ety", "dtr", "tyz", "tys", "zet", "zew"];
const ranks =['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','Z','α','β','γ','δ','ε','η','θ','ι','κ','λ','μ','ν','ξ','ο','π','ρ','σ','τ','υ','φ','χ','ψ','ω','ζ'];
const scores=[1300,1350,1400,1450,1500,1550,1600,1650,1700,1750,1800,1850,1900,1950,2000,2050,2100,2150,2200,2250,2300,2350,2400,2450,2500,2550,2600,2650,2700,2750,2800,2850,2900,2950,3000,3050,3100,3150,3200,3250,3300,3350,3400,3450,3500,3550,3600,3650,3700,3750,3800];


inputs.forEach(id => {
  const saved = localStorage.getItem(id);
  if (saved !== null) {
    $(id).value = saved;
  }

  $(id).addEventListener("input", (e) => {
    localStorage.setItem(id, e.target.value);
  });
});

form.addEventListener("submit", function(event) {
  event.preventDefault(); 
  let rec = inputs.map(id => Number($(id).value));
  const score = Math.floor(rec[0] + (rec[1] + rec[2] + rec[3] * 2) / 5 * 4 + (rec[4] + rec[5]) / 10);
  $("result").textContent = "合計で" + score + "pt"; 
  rank=0;

  for(let i=0;i<scores.length-1;i++){
    if(scores[i+1]<score){
      rank++;
    };
  };
  $("rank").textContent=ranks[rank];
});
$("reset").addEventListener("click", () => {
  inputs.forEach(id => {
    $(id).value = "";              
    localStorage.removeItem(id);
  });
  $("result").textContent = "計算結果がここに出ます・・・"; 
  $("rank").textContent = "?";
});
</script>

</body>
</html>
